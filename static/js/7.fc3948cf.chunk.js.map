{"version":3,"sources":["components/Toast/index.tsx","page/Article/index.tsx","utils/http.ts","utils/config.ts"],"names":["Toast","isShow","msg","timeout","init","setTime","ReactDOM","render","Fragment","className","Icon","name","document","getElementById","React","Component","timer","clearTimeout","dark_toast","style","display","div","createElement","setAttribute","body","appendChild","setTimeout","Article","state","info","title","tag","viewCount","createdAt","foreword","content","loading","html","objectId","this","props","match","params","setState","getArticle","set","save","initCode","e","ele","stopPropagation","hljs","configure","languages","initHighlighting","PageLoading","size","color","map","index","key","onClick","handleTag","dangerouslySetInnerHTML","__html","Bmob","initialize","query","Query","indexHot","order","limit","find","get"],"mappings":"6UAIqBA,G,mNACnBC,QAAkB,E,0DAEyC,IAA/CC,EAA8C,uDAAhC,OAAQC,EAAwB,uDAAN,IAClDC,IACAC,EAAQF,GACRG,IAASC,OACP,kBAAC,IAAMC,SAAP,KACE,yBAAKC,UAAU,kBACb,kBAACC,EAAA,EAAD,CAAMC,KAAK,SACVT,IAGLU,SAASC,eAAe,mB,GAbKC,IAAMC,YAiBzC,SAASX,IACPJ,EAAMgB,OAASC,aAAajB,EAAMgB,OAClC,IAAIE,EAAaN,SAASC,eAAe,cACzC,GAAIK,EACFA,EAAWC,MAAMC,QAAU,YACtB,CACL,IAAIC,EAAMT,SAASU,cAAc,OACjCD,EAAIE,aAAa,KAAM,cACvBX,SAASY,KAAKC,YAAYJ,IAG9B,SAAShB,EAAQF,GACfH,EAAMgB,MAAQU,YAAW,WACvB,IAAIR,EAAaN,SAASC,eAAe,cACrCK,IACFA,EAAWC,MAAMC,QAAU,UAE5BjB,GAlCgBH,EAEZgB,MAA+B,K,8BCenBW,G,0NACVC,MAAQ,CACfC,KAAM,CACJC,MAAO,GACPC,IAAK,GACLC,UAAW,EACXC,UAAW,GACXC,SAAU,GACVC,QAAS,IAEXC,SAAS,EACTC,KAAM,I,2LAGAC,EAAaC,KAAKC,MAAMC,MAAMC,OAA9BJ,SACNC,KAAKI,SAAS,CAAEP,SAAS,I,kBAENQ,YAAWN,G,cAAxBT,E,QACCgB,IAAI,YAAahB,EAAKG,UAAY,GACvCH,EAAKiB,O,UACCP,KAAKI,SAAS,CAAEd,OAAMO,SAAS,EAAOC,KAAMR,EAAKM,U,QACvDI,KAAKQ,W,kDAEL/C,EAAM6B,KAAK,uCAAU,MACrBU,KAAKI,SAAS,CACZP,SAAS,I,gJAILY,EAAsCC,GAC9CD,EAAEE,oB,iCAGFC,IAAKC,UAAU,CACbC,UAAW,CAAC,aAAc,MAAO,UAEnCF,IAAKG,qB,+BAEG,IAAD,SACuBf,KAAKX,MAA7BQ,EADC,EACDA,QAASP,EADR,EACQA,KAAMQ,EADd,EACcA,KACfP,EAA+CD,EAA/CC,MAAOC,EAAwCF,EAAxCE,IAAKC,EAAmCH,EAAnCG,UAAWC,EAAwBJ,EAAxBI,UAAWC,EAAaL,EAAbK,SACxC,OACE,yBAAKzB,UAAU,gBACZ2B,EACC,kBAACmB,EAAA,EAAD,MAEA,oCACE,yBAAK9C,UAAU,sBAAsBqB,GACrC,yBAAKrB,UAAU,qBACb,yBAAKA,UAAU,0BAAf,qBACK,8BAAOuB,GAAa,GADzB,UAGA,yBAAKvB,UAAU,yBACb,kBAACC,EAAA,EAAD,CAAMC,KAAK,MAAM6C,KAAM,GAAIC,MAAM,SAChC1B,EAAI2B,KAAI,SAACT,EAAaU,GAAd,OACP,0BAAMC,IAAKD,EAAOE,QAAS,SAACb,GAAD,OAAO,EAAKc,UAAUd,EAAGC,KACjDA,OAIP,yBAAKxC,UAAU,0BAAf,2BAA6CwB,IAE/C,yBAAKxB,UAAU,yBAAyByB,GACxC,yBAAKzB,UAAU,uBAAuBsD,wBAAyB,CAAEC,OAAQ3B,W,GA/DhDvB,IAAMC,a,yHClB3CkD,IAAKC,WCH8B,mBACR,UDI3B,IAAMC,EAAQF,IAAKG,MAAM,YAGlB,SAASC,IAGd,OAFAF,EAAMG,MAAM,aACZH,EAAMI,MAAM,GACLJ,EAAMK,OAGR,SAAS5B,EAAWN,GACzB,OAAO6B,EAAMM,IAAInC","file":"static/js/7.fc3948cf.chunk.js","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Icon from '@/Icon';\nimport './index.scss';\nexport default class Toast extends React.Component {\n  isShow: boolean = false;\n  static timer: NodeJS.Timeout | null = null;\n  static info(msg: string = 'info', timeout: number = 2000) {\n    init();\n    setTime(timeout);\n    ReactDOM.render(\n      <React.Fragment>\n        <div className=\"dark-toast-box\">\n          <Icon name=\"warn\" />\n          {msg}\n        </div>\n      </React.Fragment>,\n      document.getElementById('dark-toast')\n    );\n  }\n}\nfunction init() {\n  Toast.timer && clearTimeout(Toast.timer);\n  let dark_toast = document.getElementById('dark-toast');\n  if (dark_toast) {\n    dark_toast.style.display = 'block';\n  } else {\n    let div = document.createElement('div');\n    div.setAttribute('id', 'dark-toast');\n    document.body.appendChild(div);\n  }\n}\nfunction setTime(timeout: number) {\n  Toast.timer = setTimeout(() => {\n    let dark_toast = document.getElementById('dark-toast');\n    if (dark_toast) {\n      dark_toast.style.display = 'none';\n    }\n  }, timeout);\n}\n","import React from 'react';\nimport { getArticle } from '../../utils/http';\nimport Toast from '@/Toast';\nimport Icon from '@/Icon';\nimport PageLoading from '@/PageLoading';\nimport hljs from 'highlight.js';\nimport 'highlight.js/styles/solarized-dark.css';\nimport { RouteComponentProps, match } from 'react-router-dom';\nimport './index.scss';\n\ninterface Prop extends RouteComponentProps {\n  match: match<{ objectId: string }>;\n}\ninterface State {\n  info: {\n    [propName: string]: any;\n  };\n  html: string;\n  loading: boolean;\n}\n\nexport default class Article extends React.Component<Prop, State> {\n  readonly state = {\n    info: {\n      title: '',\n      tag: [],\n      viewCount: 0,\n      createdAt: '',\n      foreword: '',\n      content: '',\n    },\n    loading: false,\n    html: '',\n  };\n  async componentDidMount() {\n    let { objectId } = this.props.match.params;\n    this.setState({ loading: true });\n    try {\n      let info = await getArticle(objectId);\n      info.set('viewCount', info.viewCount + 1);\n      info.save();\n      await this.setState({ info, loading: false, html: info.content });\n      this.initCode();\n    } catch (error) {\n      Toast.info('文章加载失败', 1500);\n      this.setState({\n        loading: false,\n      });\n    }\n  }\n  handleTag(e: React.MouseEvent<HTMLSpanElement>, ele: string) {\n    e.stopPropagation();\n  }\n  initCode(): void {\n    hljs.configure({\n      languages: ['javascript', 'css', 'html'],\n    });\n    hljs.initHighlighting();\n  }\n  render() {\n    let { loading, info, html } = this.state;\n    let { title, tag, viewCount, createdAt, foreword } = info;\n    return (\n      <div className=\"blog_article\">\n        {loading ? (\n          <PageLoading />\n        ) : (\n          <>\n            <div className=\"blog_article_title\">{title}</div>\n            <div className=\"blog_article_info\">\n              <div className=\"blog_article_info_view\">\n                浏览：<span>{viewCount || 1}</span>次\n              </div>\n              <div className=\"blog_article_info_tag\">\n                <Icon name=\"tag\" size={15} color=\"#333\" />\n                {tag.map((ele: string, index: number) => (\n                  <span key={index} onClick={(e) => this.handleTag(e, ele)}>\n                    {ele}\n                  </span>\n                ))}\n              </div>\n              <div className=\"blog_article_info_time\">创建于：{createdAt}</div>\n            </div>\n            <div className=\"blog_article_foreword\">{foreword}</div>\n            <div className=\"blog_article_content\" dangerouslySetInnerHTML={{ __html: html }}></div>\n          </>\n        )}\n      </div>\n    );\n  }\n}\n","import Bmob from 'hydrogen-js-sdk';\nimport { SECRECT_KEY, PWD } from './config';\n// 初始化\nBmob.initialize(SECRECT_KEY, PWD);\n\nconst query = Bmob.Query('Articles');\n\n// 首页获取访问量最高的5篇文章\nexport function indexHot(): Promise<any> {\n  query.order('viewCount');\n  query.limit(5);\n  return query.find();\n}\n// 获取指定文章\nexport function getArticle(objectId: string): Promise<any> {\n  return query.get(objectId);\n}","export const SECRECT_KEY: string = '9d73348cd0a7373a';\nexport const PWD: string = '011334';\n"],"sourceRoot":""}